accessLog:
  filePath: /var/log/traefik/access.log
  # format: json
  # fields:
  #   defaultMode: keep
  #   headers:
  #     defaultMode: keep

log:
  filePath: /var/log/traefik/error.log
  level: DEBUG

entryPoints:
  web:
    address: ':8080'
    forwardedHeaders:
      trustedIPs:
        - 172.0.0.0/8
        - 192.168.0.0/16
    proxyProtocol:
      trustedIPs:
        - 172.0.0.0/8
        - 192.168.0.0/16

  web-secure:
    address: ':8443'
    http3:
      advertisedPort: 8443
    forwardedHeaders:
      trustedIPs:
        - 172.0.0.0/8
        - 192.168.0.0/16
    proxyProtocol:
      trustedIPs:
        - 172.0.0.0/8
        - 192.168.0.0/16

api:
  insecure: false
  dashboard: true
  debug: true

providers:
  docker:
    exposedByDefault: false
    endpoint: tcp://dockerproxy:2375
    network: default
  file:
    filename: /etc/traefik/routers-web.yml
    watch: true

certificatesResolvers:
  letsencrypt:
    acme:
{%- if le_staging %}    
      caServer: https://acme-staging-v02.api.letsencrypt.org/directory
{%- endif %}
      email: {{ le_email }}
      storage: /etc/acme/acme.json
      tlsChallenge: {}

experimental:
  http3: true
{%- if has_plugins %}  
  plugins:
  {%- if plugin_registry.crowdsec.enabled %}
    {%- set p = plugin_registry.crowdsec %}
    bouncer:
      modulename: github.com/maxlerebourg/crowdsec-bouncer-traefik-plugin
      version: {{ p.version }}
  {%- endif %}
{%- endif %}

global:
  sendAnonymousUsage: true
